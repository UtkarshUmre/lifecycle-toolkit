apiVersion: kuttl.dev/v1beta1
kind: TestAssert
collectors:
  - type: pod
    selector: app=podtato-head
  - command: |
      kubectl logs -l app=metrics-operator -n keptn-system
      kubectl describe keptnmetric podtatometric -n $NAMESPACE
      kubectl describe keptnmetricsprovider dynatrace -n $NAMESPACE
      kubectl describe pods -l app=podtato-head -n $NAMESPACE
---
apiVersion: lifecycle.keptn.sh/v1beta1
kind: KeptnApp
metadata:
  name: podtato-head
  labels:
    app.kubernetes.io/managed-by: "keptn"
spec:
  revision: 1
  version: "95a0b0ddca"
  workloads:
    - name: podtato-head-entry
      version: 0.1.0
    - name: podtato-head-hat
      version: 0.1.0
    - name: podtato-head-left-arm
      version: 0.1.0
    - name: podtato-head-left-leg
      version: 0.1.0
    - name: podtato-head-right-arm
      version: 0.1.0
    - name: podtato-head-right-leg
      version: 0.1.0
